import usb_hid

# 7-Byte Gamepad Descriptor (2 Joysticks, 24 Buttons)
REPORT_DESC = bytes((
    0x05, 0x01,
    0x09, 0x05,
    0xA1, 0x01,
    0x85, 0x04,

    # 24 Buttons
    0x05, 0x09,
    0x19, 0x01,
    0x29, 0x18,
    0x15, 0x00,
    0x25, 0x01,
    0x75, 0x01,
    0x95, 0x18,
    0x81, 0x02,

    # 4 Joystick Axes
    0x05, 0x01,
    0x15, 0x81,
    0x25, 0x7F,
    0x09, 0x30,
    0x09, 0x31,
    0x09, 0x32,
    0x09, 0x35,
    0x75, 0x08,
    0x95, 0x04,
    0x81, 0x02,

    0xC0
))

gamepad = usb_hid.Device(
    report_descriptor=REPORT_DESC,
    usage_page=0x01,
    usage=0x05,
    report_ids=(4,),
    in_report_lengths=(7,),
    out_report_lengths=(0,),
)

usb_hid.enable((usb_hid.Device.KEYBOARD, usb_hid.Device.MOUSE, gamepad))
